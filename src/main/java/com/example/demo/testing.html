<%@ page language="java" contentType="text/html; charset=UTF-8" %>
<%@ include file="/base.jsp" %>
<html lang="zh">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>视频课程管理 - 金财学院</title>

    <link href="${path}/static/css/course/bootstrap.min14ed.css?v=3.3.6" rel="stylesheet">
    <link href="${path}/static/css/course/font-awesome.min93e3.css?v=4.4.0" rel="stylesheet">
    <link href="${path}/static/css/course/custom.css" rel="stylesheet">
    <link href="${path}/static/css/course/jquery.steps.css" rel="stylesheet">
    <link href="${path}/static/css/course/animate.min.css" rel="stylesheet">
    <link href="${path}/static/css/course/style.min862f.css?v=4.1.0" rel="stylesheet">

    <link href="${path}/static/css/course/summernote.css" rel="stylesheet">
    <link href="${path}/static/css/course/summernote-bs3.css" rel="stylesheet">
    <link href="${path}/static/css/course/laydate.css" rel="stylesheet">
    <link href="${path}/static/css/course/bootstrap-treeview.css" rel="stylesheet">
    <link href="${path}/static/css/course/info_manage.css" rel="stylesheet">
    <link href="${path}/static/css/course/laydate_02.css" rel="stylesheet">
    <link href="${path}/static/js/plugins/uploadify/uploadify.css" rel="stylesheet">

    <script type="text/javascript" src="${path}/static/js/jquery.min.js?v=2.1.4"></script>
    <script type="text/javascript" src="${path}/static/js/bootstrap.min.js?v=3.3.6"></script>
    <script type="text/javascript" src="${path}/static/js/content.min.js?v=1.0.0"></script>
    <script type="text/javascript" src="${path}/static/js/jquery.steps.min.js"></script>
    <script type="text/javascript" src="${path}/static/js/jquery.validate.min.js"></script>
    <script type="text/javascript" src="${path}/static/js/messages_zh.min.js"></script>
    <script type="text/javascript" src="${path}/static/js/jquery.slimscroll.min.js"></script>
    <script type="text/javascript" src="${path}/static/js/laydate.js"></script>

    <script type="text/javascript" src="${path}/static/js/plugins/uploadify/swfobject.js"></script>
    <script type="text/javascript" src="${path}/static/js/plugins/uploadify/jquery.uploadify.v2.1.4.js"></script>
    <script type="text/javascript" src="${path}/static/js/admin-268xue.js"></script>
    <script type="text/javascript" src="${path}/static/js/plugins/zClip/jquery.zclip.min.js"></script>
    <script>
        $(function() {
            $(".step>.steps").on("click",
                function() {
                    //  if ($("#courseKpoint_courseId").val() != "" && $("#courseKpoint_courseId").val() != null) {
                    $(this).addClass("action").siblings().removeClass("action");
                    $("#wizard_one > .item_row").eq($(this).index()).addClass("block").siblings().removeClass("block");
                    // }
                });
            $(".full-height-scroll").slimScroll({
                height: "100%"
            });
            $("#course_isavaliable").attr("disabled", true); //设置上架状态为不可编辑

            //日期控件
            var course_up_date = {
                elem: '#course_up_date',
                format: 'YYYY-MM-DD',
                max: '2099-12-31',
                //最大日期
                istime: true,
                istoday: false,
                choose: function(datas) {
                    course_down_date.min = datas; //开始日选好后，重置结束日的最小日期
                    course_down_date.start = datas; //将结束日的初始值设定为开始日
                    //根据选择的时间段不同动态更改课程上架状态
                    var nows = laydate.now();
                    var begin = $("#course_up_date").val();
                    var end = $("#course_down_date").val();
                    if (begin > nows) {
                        $("#course_isavaliable").val(2);
                    } else if (begin = nows) {
                        $("#course_isavaliable").val(0);
                    }
                }
            };
            var course_down_date = {
                elem: '#course_down_date',
                format: 'YYYY-MM-DD',
                max: '2099-12-31',
                istime: true,
                istoday: false,
                choose: function(datas) {
                    course_up_date.max = datas; //结束日选好后，重置开始日的最大日期
                    //根据选择的时间段不同动态更改课程上架状态
                    var nows = laydate.now();
                    var begin = $("#course_up_date").val();
                    var end = $("#course_down_date").val();
                    if(begin<nows){
                        if(end<nows){
                            $("#course_isavaliable").val(1);
                        }else if(end=nows){
                            $("#course_isavaliable").val(0);
                        }else{
                            if(begin>nows){
                                $("#course_isavaliable").val(2);
                            }
                        }
                    }
                }
            };
            laydate(course_up_date);
            laydate(course_down_date);

            var uploadServerUrl = "${uploadServerUrl}";
            var staticImageServer = "${staticImageServer}";
            fileuploadFun();
            //初始化课程图片上传插件
            uploadImageLoad('fileupload', 'course_logo', 'imgUrl', 'fileQueue', 'course', uploadServerUrl, staticImageServer);

            //课件上传方法
            uploadCoursewareLoad('coursewareupload', 'coursewareQueue');
            //视频上传方法
            uploadVideowareLoad('videowareupload', 'videowareQueue');
        });

        function copyUrl() {
            //复制视频url
            var vUrl = $.trim($("#courseKpoint_videourl").val());
            if (vUrl == "" || vUrl == null) {
                alert("请输入视频地址");
            } else {
                $("#copyVedioUrl").zclip({
                    path: "/ptadmin/static/js/plugins/zClip/ZeroClipboard.swf",
                    copy: function() {
                        return "${ctx}/play/video/" + vUrl;
                    },
                    afterCopy: function() {
                        /* 复制成功后的操作 */
                        alert("复制成功").fadeOut(3000);
                    }
                });
            }
        }

        //保存课程基础信息
        function saveCourseJcxx() {
            //if(!checkBaseInfo())return;
            var url = "${path}/pxptCourse/add/addCourseJcxx";
            $("#course_isavaliable").attr("disabled", false);
            $.post(url, $("#addCourseJcxx").serialize(),
                function(data) {
                    if (data.issuccess == 'ok') {
                        $("#course_isavaliable").attr("disabled", true);
                        alert("课程信息保存成功！");
                        $("#course_id").val(data.courseId);
                        $("#courseKpoint_courseId").val(data.courseId);
                        $("#kpoingManager").click();
                    } else {
                        $("#course_isavaliable").attr("disabled", true);
                        alert("课程信息保存失败，请稍后再试！");
                    }
                });
        }

        //保存章节信息
        function saveKpoint() {
            if (!checkCourseKpoint()) return;
            var url = "${path}/pxptCourseKpoint/kpoint/add";
            $.post(url, $("#saveKpointForm").serialize(),
                function(data) {
                    if (data.issuccess == 'ok') {
                        alert("课程章节信息保存成功！");
                        updateKpoint();
                        initKpoint();
                    } else {
                        alert("课程章节信息保存失败，请稍后再试！");
                    }
                });
        }

        function updateKpoint() {
            var courseId = $("#course_id").val();
            var url = "${path}/pxptCourseKpoint/kpoint/queryKpointByCourseId/" + courseId;
            $.post(url, $("#saveKpointForm").serialize(),
                function(data) {
                    var kpHtml = "";
                    if (data.issuccess == 'ok') {
                        if (null != data.courseKpointList && data.courseKpointList.length > 0) {
                            for (var i = 0; i < data.courseKpointList.length; i++) {
                                kpHtml += "<tr><td><input type=\"checkbox\" class=\"i-checks\" name=\"delKpointId\" value=\"" + data.courseKpointList[i].id + "\"/></td><td><span onclick=\"javascript:showKpoint('" + data.courseKpointList[i].id + "');\">" + data.courseKpointList[i].name + "</span></td></tr>";
                            }
                        }
                        $("#kpointList").html(kpHtml);
                    } else {
                        alert("获取章节信息失败，请稍后再试！");
                    }
                });

        }

        //获取章节详细信息
        function showKpoint(kpointId) {
            var url = "${path}/pxptCourseKpoint/kpoint/queryKpointById/" + kpointId;
            $.post(url, {},
                function(data) {
                    if (data.issuccess == 'ok') {
                        $("#courseKpoint_id").val(data.courseKpoint.id);
                        $("#courseKpoint_name").val(data.courseKpoint.name);
                        $("#courseKpoint_sort").val(data.courseKpoint.sort);
                        $("#courseKpoint_examLink").val(data.courseKpoint.examLink);
                        $(":radio[name='courseKpoint.isCreateWaterPrint'][value='" + data.courseKpoint.isCreateWaterPrint + "']").prop("checked", "checked");
                        $(":radio[name='courseKpoint.isfree'][value='" + data.courseKpoint.isfree + "']").prop("checked", "checked");
                        $("#courseKpoint_freeTime").val(data.courseKpoint.freeTime);
                        $("#courseKpoint_pwd").val(data.courseKpoint.pwd);
                        $("#courseKpoint_courseMinutes").val(data.courseKpoint.courseMinutes);
                        $("#courseKpoint_courseSeconds").val(data.courseKpoint.courseSeconds);
                        $("#courseKpoint_videourl").val(data.courseKpoint.videourl);
                        if (null != data.courseKpoint.teacherId) {
                            $("#course_teacherIds").val(data.courseKpoint.teacherId);
                            querytecher();
                        }
                    }
                });
        }
        //删除章节信息
        function delKpoint() {
            var url = "${path}/pxptCourseKpoint/kpoint/delKpointById";
            var pointIds = "";
            $("input[name='delKpointId']:checkbox:checked").each(function() {
                if (pointIds == "") {
                    pointIds = $(this).val();
                } else {
                    pointIds += "," + $(this).val();
                }
            });
            $.post(url, {
                    courseId: $("#courseKpoint_courseId").val(),
                    pointIds: pointIds
                },
                function(data) {
                    if (data.issuccess == 'ok') {
                        alert("删除章节成功!");
                        initKpoint();
                        updateKpoint();
                    }
                });
        }

        //置空章节信息
        function initKpoint() {
            $("#courseKpoint_id").val("");
            $("#courseKpoint_name").val("");
            $("#courseKpoint_sort").val("");
            $("#courseKpoint_examLink").val("");
            $("#courseKpoint_freeTime").val("");
            $("#courseKpoint_pwd").val("");
            $("#courseKpoint_videourl").val("");
            $("#courseKpoint_courseMinutes").val("");
            $("#courseKpoint_courseSeconds").val("");
            $("#tchtml").html("");
            $("#coursewareQueue").html("");
            $("#videowareQueue").html("");
        }

        //设置优先级
        function setSort(id, sort) {
            $("#" + id).val(sort);
        }

        //验证输入信息的有效性
        //视频课程基本信息
        function checkBaseInfo() {
            var reg = "";
            //课程名称
            if (($("#name").val() == "") || ($("#name").val() == null)) {
                alert("请输入课程名称");
                return false;
            }
            //日期控件
            if ($("#course_up_date").val() == "") {
                alert("请选择开始日期");
                return false;
            }
            if ($("#course_down_date").val() == "") {
                alert("请选择结束日期");
                return false;
            }
            //优先级course_sort
            reg = /^[1-9]{1,3}$/;
            if (($("#course_sort").val() == "") || ($("#course_sort").val() == null)) {
                alert("请输入优先级");
                return false;
            }
            if (!reg.test($("#course_sort").val())) {
                alert("优先级应为1-999的整数");
                return false;
            }
            //课程简介
            if (($("#title").val() == "") || ($("#title").val() == null)) {
                alert("请输入课程简介");
                return false;
            }
            //课程详情
            if (($("#context").val() == "") || ($("#context").val() == null)) {
                alert("请输入课程详情");
                return false;
            }

            //原价格
            reg = /(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/;
            if (($("#sourceprice").val() == "") || ($("#sourceprice").val() == null)) {
                alert("请输入原价格");
                return false;
            }
            if (!reg.test($("#sourceprice").val())) {
                alert("原价格应为大于等于零的数字且最多两位小数");
                return false;
            }
            //销售价格
            if (($("#currentprice").val() == "") || ($("#currentprice").val() == null)) {
                alert("请输入销售价格");
                return false;
            }
            if (!reg.test($("#currentprice").val())) {
                alert("销售价格应为大于等于零的数字且最多两位小数");
                return false;
            }
            if (parseInt($("#currentprice").val()) > parseInt($("#sourceprice").val())) {
                alert("销售价格应小于等于原价格");
                return false;
            }
            //天数;
            reg = /^[1-9]*$/;
            if (($("#loseTime").val() == "") || ($("#loseTime").val() == null)) {
                alert("请输入天数");
                return false;
            }
            if (!reg.test($("#loseTime").val())) {
                alert("天数应是正整数");
                return false;
            }

            //初始销售量
            reg = /^\d+$/;
            if (($("#pageBuycount").val() == "") || ($("#pageBuycount").val() == null)) {
                alert("请输入初始化销售量");
                return false;
            }
            if (!reg.test($("#pageBuycount").val())) {
                alert("初始销量应大于等于零");
                return false;
            }

            //初始浏览量
            reg = /^\d+$/;
            if (($("#pageViewcount").val() == "") || ($("#pageViewcount").val() == null)) {
                alert("请输入初始浏览量");
                return false;
            }
            if (!reg.test($("#pageViewcount").val())) {
                alert("初始浏览量应大于等于零");
                return false;
            }

            //课程范围
            if ($("#ranged").val() == null) {
                alert("请选择课程范围");
                return false;
            }
            //启用状态
            if ($("#course_isEnable").val() == null) {
                alert("请选择启用状态");
                return false;
            }
            //上架状态
            if ($("#course_isavaliable").val() == null) {
                alert("请选择上架状态");
                return false;
            }
            return true;
        }

        //视频课程章节管理验证输入信息的有效性courseKpoint_name
        function checkCourseKpoint() {
            var reg = "";
            if (($("#courseKpoint_name").val() == "") || ($("#courseKpoint_name").val() == null)) {
                alert("请输入章节名称");
                return false;
            }

            //优先级
            reg = /^[1-9]{1,3}$/;
            if (($("#courseKpoint_sort").val() == "") || ($("#courseKpoint_sort").val() == null)) {
                alert("请输入优先级");
                return false;
            }
            if (!reg.test($("#courseKpoint_sort").val())) {
                alert("优先级应为1-999的整数");
                return false;
            }
            return true;
        }

        //打开教师列表选择页面
        function openTeaList() {
            window.open('${path}/pxptTeacher/teacher/selectlist?teacher.checkboxFalg=radio', 'newwindow', 'toolbar=no,scrollbars=yes,location=no,resizable=no,top=200,left=300,width=800,height=600');
        }

        //获取选择的教师ID
        function addnewTeacherId(newTcIdArr) {
            $("#course_teacherIds").val(newTcIdArr);
            $("#courseKpoint_teacherId").val(newTcIdArr);
            querytecher();
        }
        //根据教师ID获取教师详细信息
        function querytecher() {
            var ids = $("#course_teacherIds").val();
            if (ids != null && ids != "") {
                $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: "${path}/pxptTeacher/teacher/queryByIds.json",
                    data: {
                        "ids": ids
                    },
                    async: false,
                    success: function(result) {
                        if (result.success == true) {
                            var str = "";
                            var teacherList = result.entity;
                            for (var i = 0; i < teacherList.length; i++) {
                                var tc = teacherList[i];
                                str += '<p style="width:100%;margin: 0 0 0em">' + tc.name + '&nbsp;&nbsp;</p>';
                            }
                            $("#tchtml").html(str);
                        }
                    }
                });
            } else {
                $("#tchtml").html("");
            }
        }

        //通过名字模糊查询章节
        function queryKpoint() {
            var courseId = $("#course_id").val();
            var name = $("#searchName").val();
            var url = "${path}/pxptCourseKpoint/kpoint/queryKpoint/" + courseId;
            $.post(url, {
                    name: name
                },
                function(data) {
                    var kpHtml = "";
                    if (data.issuccess == 'ok') {
                        if (null != data.courseKpointList && data.courseKpointList.length > 0) {
                            for (var i = 0; i < data.courseKpointList.length; i++) {
                                kpHtml += "<tr><td><input type=\"checkbox\" class=\"i-checks\" name=\"delKpointId\" value=\"" + data.courseKpointList[i].id + "\"/></td><td><span onclick=\"javascript:showKpoint('" + data.courseKpointList[i].id + "');\">" + data.courseKpointList[i].name + "</span></td></tr>";
                            }
                        }
                        $("#kpointList").html(kpHtml);
                    } else {
                        alert("获取章节信息失败，请稍后再试！");
                    }
                });

        }
    </script>
</head>
<body>
<div class="wrapper wrapper-content">
    <div class="row">
        <!--右侧编辑模块-->
        <div class="col-sm-12">
            <div class="add_course">
                <h3>${title }</h3>
            </div>
            <div class="step">
                <span class="steps action">1. 视频课程基本信息管理</span>
                <span class="steps" id="kpoingManager">2. 视频课程章节管理</span>
            </div>
            <div class="col-sm-12 bgceee">
                <div class="ibox float-e-margins">
                    <div class="ibox-content_one">
                        <div id="wizard_one">
                            <div class="item_row block">
                                <!--<h1>视频课程基本信息管理</h1>-->
                                <p class="tableP">
                                    <img src="${path}/static/images/course/message.png" alt="">&nbsp;视频课程基本信息：</p>
                                <div class="step-content">
                                    <!--上半部分-left-->
                                    <form id="addCourseJcxx">
                                        <input name="course.teacherIds" id="course_teacherIds" type="hidden" value="" />
                                        <input name="course.categoryId" id="course_categoryId" type="hidden" value="${categoryId}" />
                                        <input name="course.categoryCode" id="course_categoryCode" type="hidden" value="${categoryCode}" />
                                        <input name="course.subjectId" id="subjectId" type="hidden" value="100" />
                                        <input name="course.logo" id="course_logo" type="hidden" />
                                        <input name="course.mobileLogo" id="mobile_logo" type="hidden" />
                                        <input name="course.packageLogo" id="package_logo" type="hidden" />
                                        <input name="course.openRanged" id="openRanged" type="hidden" />
                                        <input name="course.openType" id="openType" type="hidden" />
                                        <input name="course.lessionnum" type="hidden" value="0" />
                                        <input name="course.sellType" id="sellType" type="hidden" value="COURSE" />
                                        <input name="course.id" id="course_id" type="hidden" value="${course.id}" />
                                        <div role="form" class="form-horizontal m-t col-sm-6">
                                            <div class="form-group draggable">
                                                <label class="col-sm-4 control-label">课程名称：</label>
                                                <div class="col-sm-8">
                                                    <input type="text" name="course.name" id="name" value="${course.name}" class="form-control" placeholder="请输入课程名称">
                                                </div>
                                            </div>
                                            <div class="form-group draggable">
                                                <label class="col-sm-4 control-label">课程范围：</label>
                                                <div class="col-sm-8">
                                                    <select class="form-control" name="course.ranged" id="ranged">
                                                        <option value="0">对外</option>
                                                        <option value="1">对内</option>
                                                    </select>
                                                    <c:if test="${not empty course.ranged }">
                                                        <script>$("#ranged").val('${course.ranged}');</script>
                                                    </c:if>
                                                </div>
                                            </div>
                                            <div class="form-group draggable">
                                                <label class="col-sm-4 control-label">上架起止时间：</label>
                                                <div class="col-sm-4 left22">
                                                    <input class="laydate-icon form-control layer-date col-sm-6" name="course.upDate" id="course_up_date" placeholder="开始日期" value="<fmt:formatDate  type='both' value='${course.upDate}' pattern='yyyy-MM-dd'/>"></div>
                                                <div class="col-sm-4">
                                                    <input class="laydate-icon form-control layer-date col-sm-6" name="course.downDate" id="course_down_date" placeholder="结束日期" value="<fmt:formatDate  type='both' value='${course.downDate}' pattern='yyyy-MM-dd'/>"></div>
                                            </div>
                                            <div class="form-group draggable">
                                                <label class="col-sm-4 control-label">是否精品课程：</label>
                                                <div class="col-sm-8">
                                                    <label class="radio-inline">
                                                        <input type="radio" checked="checked" value="0" name="course.boutique">是</label>
                                                    <label class="radio-inline">
                                                        <input type="radio" value="1" name="course.boutique">否</label></div>
                                                <c:if test="${not empty course.boutique }">
                                                    <script>$(":radio[name='course.boutique'][value='${course.boutique}']").prop("checked", "checked");</script>
                                                </c:if>
                                            </div>
                                        </div>
                                        <!--上半部分-right-->
                                        <div role="form" class="form-horizontal m-t col-sm-6">
                                            <div class="form-group draggable">
                                                <label class="col-sm-3 control-label" style="right: -53px">优先级：</label>
                                                <div class="col-sm-4" style="left: 33px">
                                                    <input type="text" value="${course.sort}" name="course.sort" id="course_sort" class="form-control" placeholder="请输入优先级"></div>
                                                <div class="col-sm-5 left12">
                                                    <a href="#none" onclick="javascript:setSort('course_sort',999)" class="buttonStyle btn-success fl">置顶</a>
                                                    <a href="#none" onclick="javascript:setSort('course_sort',1)" class="buttonStyle btn-success fl">沉底</a>
                                                    <span class="help-block m-b-none fontS10 fl">（999表示置顶，1表示沉底）</span>
                                                </div>
                                            </div>
                                            <div class="form-group draggable">
                                                <label class="col-sm-4 control-label">启用状态：</label>
                                                <div class="col-sm-8">
                                                    <select class="form-control" name="course.isEnable" id="course_isEnable">
                                                        <option value="0">启用</option>
                                                        <option value="1">未启用</option>
                                                    </select>
                                                    <c:if test="${not empty course.isEnable }">
                                                        <script>$("#course_isEnable").val('${course.isEnable}');</script>
                                                    </c:if>
                                                </div>
                                            </div>
                                            <div class="form-group draggable">
                                                <label class="col-sm-4 control-label">上架状态：</label>
                                                <div class="col-sm-8">
                                                    <select class="form-control" name="course.isavaliable" id="course_isavaliable">
                                                        <option value="0">上架</option>
                                                        <option value="1">下架</option>
                                                        <option value="2">待上架</option>
                                                    </select>
                                                    <c:if test="${not empty course.isavaliable }">
                                                        <script>$("#course_isavaliable").val('${course.isavaliable}');</script>
                                                    </c:if>
                                                </div>
                                            </div>
                                            <div class="form-group draggable">
                                                <label class="col-sm-4 control-label">是否推荐课程：</label>
                                                <div class="col-sm-8">
                                                    <label class="radio-inline">
                                                        <input type="radio" checked="" value="0" name="course.isCommend">是</label>
                                                    <label class="radio-inline">
                                                        <input type="radio" value="1" name="course.isCommend">否</label>
                                                </div>
                                                <c:if test="${not empty course.isCommend }">
                                                    <script>$(":radio[name='course.isCommend'][value='${course.isCommend}']").prop("checked", "checked");</script>
                                                </c:if>
                                            </div>
                                        </div>
                                        <!--下半部分表单-->
                                        <div role="form" class="form-horizontal m-t col-sm-12">
                                            <div class="form-group draggable">
                                                <label class="col-sm-2 control-label">课程简介：</label>
                                                <div class="col-sm-10 left20">
                                                    <input type="text" name="course.title" id="title" value="${course.title}" class="form-control" placeholder="请输入课程简介"></div>
                                            </div>
                                            <div class="form-group draggable">
                                                <label class="col-sm-2 control-label">课程详情：</label>
                                                <div class="col-sm-10 left20">
                                                    <textarea name="course.context" id="context" cols="30" rows="10" class="form-control diff-textarea"  placeholder="请输入课程详情">${course.context}</textarea></div>
                                            </div>
                                            <div class="form-group draggable">
                                                <label class="col-sm-2 control-label">课程图片：</label>

                                                <input type="file" id="fileupload" class="vam"/>

                                                <span class="help-block m-b-none spanStyle">（图片尺寸要求：80*80，大小60k以内）</span>
                                                <div class="ml10 mt10" style="text-align: center;">
                                                    <c:if test="${not empty course.logo }">
                                                        <img src="${staticImageServer}${course.logo}" alt="" width="400" height="300" id="imgUrl"/>
                                                    </c:if>
                                                    <c:if test="${empty course.logo }">
                                                        <img src="" alt="" width="400" height="300" style="display: none" id="imgUrl"/>
                                                    </c:if>
                                                </div>
                                                <div id="fileQueue" class="mt10"></div>
                                            </div>
                                        </div>
                                        <!--最底部-left-->
                                        <div role="form" class="form-horizontal m-t col-sm-6">
                                            <div class="form-group draggable">
                                                <label class="col-sm-4 control-label">原价格：</label>
                                                <div class="col-sm-8">
                                                    <input type="text" name="course.sourceprice" id="sourceprice" class="form-control" placeholder="请输入原价格" value="${course.sourceprice}"></div>
                                            </div>
                                            <div class="form-group draggable">
                                                <label class="col-sm-4 control-label">有效期类型：</label>
                                                <div class="col-sm-8">
                                                    <select class="form-control" name="course.losetype" id="losetype">
                                                        <option value="1">按天数</option></select>
                                                </div>
                                            </div>
                                            <div class="form-group draggable">
                                                <label class="col-sm-4 control-label">初始化销售量：</label>
                                                <div class="col-sm-8">
                                                    <input type="text" name="course.pageBuycount" id="pageBuycount" class="form-control" placeholder="请输入初始化销售量" value="${course.pageBuycount}"></div>
                                            </div>
                                        </div>
                                        <!--最底部-right-->
                                        <div role="form" class="form-horizontal m-t col-sm-6">
                                            <div class="form-group draggable">
                                                <label class="col-sm-4 control-label">销售价格：</label>
                                                <div class="col-sm-8">
                                                    <input type="text" name="course.currentprice" id="currentprice" class="form-control" placeholder="请输入销售价格" value="${course.currentprice}"></div>
                                            </div>
                                            <div class="form-group draggable">
                                                <label class="col-sm-4 control-label">天数：</label>
                                                <div class="col-sm-8">
                                                    <input type="text" name="course.loseTime" id="loseTime" class="form-control" placeholder="请输入天数" value="${course.loseTime}"></div>
                                            </div>
                                            <div class="form-group draggable">
                                                <label class="col-sm-4 control-label">初始化浏览量：</label>
                                                <div class="col-sm-8">
                                                    <input type="text" name="course.pageViewcount" id="pageViewcount" class="form-control" placeholder="请输入初始化浏览量" value="${course.pageViewcount}"></div>
                                            </div>
                                        </div>
                                        <div class="form-horizontal m-t col-sm-12">
                                            <div class="hr-line-dashed"></div>
                                            <div class="form-group draggable">
                                                <div class="col-sm-12 col-sm-offset-3 margin40">
                                                    <a href="javascript:saveCourseJcxx();" class="btn btn-success">保存内容</a>
                                                    <!-- <a href="javascript:void (0)" class="btn btn-white" type="submit">取消</a> -->
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="item_row">
                                <!--<h1>视频课程章节管理</h1>-->
                                <p class="tableP">
                                    <img src="${path}/static/images/course/message.png" alt="">&nbsp;视频课程章节信息：</p>
                                <div class="step-content">
                                    <form id="saveKpointForm">
                                        <input type="hidden" name="courseKpoint.courseId" id="courseKpoint_courseId" value="${course.id}" />
                                        <input type="hidden" name="courseKpoint.id" id="courseKpoint_id" value="" />
                                        <input type="hidden" name="courseKpoint.parentId" value="0" />
                                        <!-- 父ID默认为0 -->
                                        <input type="hidden" name="courseKpoint.type" id="courseKpoint_type" value="0" />
                                        <!-- 只有章节，默认为0 -->
                                        <input type="hidden" name="courseKpoint.playcount" id="courseKpoint_playcount" value="0" />
                                        <!-- 播放次数 -->
                                        <input type="hidden" name="courseKpoint.teacherId" id="courseKpoint_teacherId" value="0" />
                                        <!-- 教师ID -->
                                        <!--第二页左侧列表模块-->
                                        <div class="col-sm-4 left50">
                                            <div class="ibox">
                                                <div class="ibox-content">
                                                    <div class="input-group ">
                                                        <input type="text" placeholder="查找课程" class="input form-control" id="searchName">
                                                        <span class="input-group-btn">
                                <button type="button" class="btn btn btn-success " onclick="javascript:queryKpoint();">
                                  <i class="fa fa-search"></i>搜索</button>
                              </span>
                                                    </div>
                                                    <div class="tab-content maxHeight">
                                                        <div id="tab-1" class="tab-pane active">
                                                            <div class="full-height-scroll">
                                                                <div class="table-responsive">
                                                                    <table class="table table-striped table-hover marginBoo">
                                                                        <tbody id="kpointList">
                                                                        <c:forEach items="${courseKpointList}" var="kpoint">
                                                                            <tr>
                                                                                <td>
                                                                                    <input type="checkbox" class="i-checks" name="delKpointId" value="${kpoint.id}"/></td>
                                                                                <td>
                                                                                    <span onclick="javascript:showKpoint(${kpoint.id});">${kpoint.name}</span></td>
                                                                            </tr>
                                                                        </c:forEach>
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class=" addCourse">
                                                        <a type="button" class="btn btn-w-m btn-success marginR20" onclick="delKpoint();">删除章节</a>
                                                        <a type="button" class="btn btn-w-m btn-success" onclick="initKpoint();">新增章节</a></div>
                                                </div>
                                            </div>
                                        </div>
                                        <!--右侧表单模块-->
                                        <div class="form-horizontal m-t col-sm-8" style = "left: 40px;">
                                            <div class="form-group draggable">
                                                <label class="col-sm-2 control-label">章节名称：</label>
                                                <div class="col-sm-8">
                                                    <input type="text" name="courseKpoint.name" id="courseKpoint_name" value="" class="form-control" placeholder="请输入章节名称"></div>
                                            </div>
                                            <div class="form-group draggable">
                                                <label class="col-sm-2 control-label">优先级：</label>
                                                <div class="col-sm-4" style="left: -22px">
                                                    <input type="text" name="courseKpoint.sort" id="courseKpoint_sort" value="1" class="form-control" placeholder="请输入文本"></div>
                                                <div class="col-sm-5">
                                                    <a href="#none" onclick="javascript:setSort('courseKpoint_sort',999)"  class="buttonStyle btn-success fl">置顶</a>
                                                    <a href="#none" onclick="javascript:setSort('courseKpoint_sort',1)"  class="buttonStyle btn-success fl">沉底</a>
                                                    <span class="help-block m-b-none fontS10 fl">（999表示置顶，1表示沉底）</span>
                                                </div>
                                            </div>
                                            <div class="form-group draggable">
                                                <label class="col-sm-2 control-label">章节视频：</label>
                                                <div class="col-sm-8">
                                                    <div class="ibox float-e-margins">
                                                        <input type="text" name="courseKpoint.videourl" id="courseKpoint_videourl" value="" class="form-control" placeholder="请输入视频地址">
                                                        <input type="hidden" id="vl" value="" class="form-control" placeholder="">
                                                        </br>
                                                        <div class="form-group draggable">


                                                            <div class="form-group draggable" style="margin-left: -18px">
                                                                <label class="col-sm-2 control-label" style="margin-left: 13px;">文件上传：</label>
                                                                <input class="change" id="videowareupload" type="file"  /></div>
                                                            <div id="videowareQueue" class="mt10" style="margin-left:150px"></div>
                                                        </div>

                                                        </br>
                                                        <div class="copyUrl" onclick="javascript:copyUrl()">
                                                            <span id = "copyVedioUrl"  >复制视频完整地址</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group draggable">
                                                <label class="col-sm-2 control-label">视频时长：</label>
                                                <div class="col-sm-4" style="left: -22px;width: 150px">
                                                    <input type="text" name="courseKpoint.courseMinutes" id="courseKpoint_courseMinutes" value="" class="form-control" placeholder="请输入分钟"></div>
                                                <div class="col-sm-5" style="left: -22px;width: 150px">
                                                    <input type="text" name="courseKpoint.courseSeconds" id="courseKpoint_courseSeconds" value="" class="form-control" placeholder="请输入秒时"></div>
                                            </div>
                                            <div class="form-group draggable">
                                                <label class="col-sm-2 control-label">观看密码：</label>
                                                <div class="col-sm-8">
                                                    <input type="text" name="courseKpoint.pwd" id="courseKpoint_pwd" class="form-control" placeholder="（默认为无密码）"></div>
                                            </div>
                                            <div class="form-group draggable">
                                                <label class="col-sm-2 control-label">生成水印：</label>
                                                <div class="col-sm-3">
                                                    <label class="radio-inline">
                                                        <input type="radio" checked="" value="0" id="" name="courseKpoint.isCreateWaterPrint">是</label>
                                                    <label class="radio-inline">
                                                        <input type="radio" value="1" name="courseKpoint.isCreateWaterPrint">否</label></div>
                                                <label class="col-sm-2 control-label">选择水印：</label>
                                                <div class="col-sm-3 left20">
                                                    <select class="form-control" name="courseKpoint.waterPrintName">
                                                        <option value="1">金财互联</option></select>
                                                </div>
                                            </div>
                                        </div>
                                        <div role="form" class="form-horizontal col-sm-8 fr" style = "left: 40px;">
                                            <div class="form-group draggable">
                                                <label class="col-sm-2 control-label">是否试听：</label>
                                                <div class="col-sm-3">
                                                    <label class="radio-inline">
                                                        <input type="radio" checked="" value="0" id="" name="courseKpoint.isfree">是</label>
                                                    <label class="radio-inline">
                                                        <input type="radio" value="1" id="" name="courseKpoint.isfree">否</label></div>
                                                <label class="col-sm-2 control-label">试听时间：</label>
                                                <div class="col-sm-3 left20">
                                                    <input type="text" name="courseKpoint.freeTime" id="courseKpoint_freeTime" class="form-control" placeholder="单位为“分钟”"></div>
                                            </div>
                                            <div class="form-group draggable">
                                                <div class="form-group draggable">
                                                    <label class="col-sm-2 control-label" style="margin-left: 11px;">授课老师：</label>
                                                    <div id="tchtml"></div>
                                                    <a type="button" class="btn btn-w-m btn-success" onclick="javascript:openTeaList();" style="width: 105px;height: 35px;">选择老师</a>
                                                </div>

                                                <div class="form-group draggable" style="margin-left: -18px">
                                                    <label class="col-sm-2 control-label" style="margin-left: 13px;">课件：</label>
                                                    <input class="change" id="coursewareupload" type="file"  /></div>
                                                <div id="coursewareQueue" class="mt10" style="margin-left:150px"></div>
                                            </div>


                                            <div role="form" class="form-horizontal m-t col-sm-12">
                                                <div class="hr-line-dashed"></div>
                                                <div class="form-group draggable">
                                                    <div class="col-sm-12 col-sm-offset-3 margin40">
                                                        <a href="javascript:saveKpoint();" class="btn btn-success">保存内容</a>
                                                        <!-- <a href="javascript:void (0)" class="btn btn-white">取消</a> -->
                                                    </div>
                                                </div>
                                            </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>